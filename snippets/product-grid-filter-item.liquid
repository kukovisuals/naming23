<style>
  .bundle-price23 p:first-child{
      color: var(--red-color-discounts);
  }
  .bundle-price23 .ebyProdTile-vipPriceWrapper.bfx-remove-element .bfx-price{
      padding-left: 4px;
      text-decoration: line-through;
  }
  .quickAddBtnInnerWrapper .prodTilePriceWrapper.hoPriceSale.bundle-price23{
    flex-direction: revert;
  }
</style>
{% assign isOnHolidaySale = false %}
<!-- fc 041123 -->
{% assign isBundlePack = false %}
{% assign bndlVariants = '' %}
{% assign bndlVariants2 = '' %}
{% assign packProducts = '' %}
{% assign isBundleBraExtra = '' %}
{% assign packPrice = '' %}

{% if product.type == "Bra Pack" %}
  {% assign isBundleBraExtra = product.compare_at_price | money_without_trailing_zeros %}
{% endif %}
{% if product.type contains "Cotton" %}
    {%- assign showQuickAdd = true -%}
{% elsif product.type contains "Bra Pack" or product.type contains "Season Set" %}
    {%- assign showQuickAdd = false -%}
{% endif %}

{% for prodTag in product.tags %}
  {% if prodTag contains "elegance23" or prodTag contains "apparelSale-apr2023" %}
    {% assign isOnHolidaySale = true %}
  <!-- tags--->
  {%- elsif prodTag contains 'fyca23' %}
      {% assign bndlVariants = prodTag | remove: 'fyca23-' %}
      {% assign isBundlePack = true %}
  {% elsif prodTag contains 'fycb23' %}
      {% assign bndlVariants2 = prodTag | remove: 'fycb23-' %}
  {%  elsif prodTag contains 'packProducts' %}
      {% assign packProducts = prodTag | remove: 'packProducts-' %}   
  {%  elsif prodTag contains 'packPrice' %}
      {% assign packPrice = prodTag | remove: 'packPrice-' %}
  {% endif %}
{% endfor %}

{% if isOnHolidaySale %}
    {% assign isSubscriber = false%}
    {% if customer.tags contains 'Active Subscriber' %}
      {% assign isSubscriber = true%}
    {% endif %}
    {% assign premSkuCodes = ""%}
    {% assign holidayDiscounts = "30%,30%,30%,30%,30%,30%,30%,30%,30%,30%" | split: ',' %}
    {% assign holidayCodes = "BK,CR,TO,WB,KK,MI,WS,RP,CG,CP,NC" | split: "," %}
    {% assign currSkuCode = product.selected_or_first_available_variant.sku | slice: 7, 2 %}
    {% assign holidayCottonDiscounts = "50%,60%,50%,60%" | split: ',' %}
    {% assign holidayCottonCodes = "BO,LG,BK,FR" | split: "," %}

    {% if product.type contains "Silk" %}
        {% assign currSaleDiscount = "40%" %}
    {% elsif product.type == "Bodysuit" %}
        {% assign currSaleDiscount = "40%" %}
    {% elsif product.type == "Cotton Bralette" or product.type == "Cotton Underwear" %}
        {% if holidayCottonCodes contains currSkuCode %}
          {% for skuCode in holidayCottonCodes %}
            {% if currSkuCode == skuCode %}
              {% assign skuCodeIndex = forloop.index0 %}
              {% break %}
            {% endif %}
          {% endfor %}
        {% endif %}
      
        {% assign currSaleDiscount = holidayCottonDiscounts[skuCodeIndex] %}
    {% elsif product.type == "Season Set" %}
      {% assign currSaleDiscount = "30%" %}
    {% elsif product.type == "Bra Pack" %}
      {% assign currSaleDiscount = "30%" %}
      {% for prodTag in product.tags %}
        {% if prodTag contains 'bundleFabric-mesh_and_signature'%}
          {% assign currSaleDiscount = "14.51%" %}
        {% endif %}
      {% endfor %}
    {% else %}
        {% if holidayCodes contains currSkuCode %}
          {% for skuCode in holidayCodes %}
            {% if currSkuCode == skuCode %}
              {% assign skuCodeIndex = forloop.index0 %}
              {% break %}
            {% endif %}
          {% endfor %}
        {% endif %}
      
        {% assign currSaleDiscount = holidayDiscounts[skuCodeIndex] %}
    {% endif %}

    {% comment %}
    {% assign currSaleDiscount = "40%" %}
    {% endcomment %}

    {% comment %}
    {% assign currSaleDiscount = "40%" %}
    
    {% endcomment %}
    {% if product.type == "Core Bralette" %}
        {% if product.title contains "Skyway" %}
          {% assign currSaleDiscount = "30%" %}
        {% endif %}
    {% endif %}

    {% if isSubscriber %}
        {% assign currSaleDiscount = currSaleDiscount | replace: "%", "" | plus: 10 | append: "%" %}
    {% endif %}

{% else %}
    {% assign currSaleDiscount = "n_a" %}
{% endif %}

{% if product.type == "Season Set" %}
  {%- assign glueFab = ""-%}
  {% for prodTag in product.tags %}
    {% if prodTag contains 'setTempFa-' %}
      {%- assign prodFabricTitle = "Bra & Panty Set" -%}
        {%- assign glueFab = "Only Bra & "-%} 
    {% elsif prodTag contains "setFabric-" %}
      {%- assign tempFab = prodTag | replace: "setType-", "" -%}
      {% if tempFab contains 'mesh' %}
        {%- assign glueFab = "Bralette & "-%}  
        {%- assign prodFabricTitle = "Sheer Bra & Panty Set" -%}
      {% elsif tempFab contains 'signature' %}
        {%- assign glueFab = "Support & "-%}
        {%- assign prodFabricTitle = "Bra & Panty Set" -%}
      {% endif %}
    {% elsif prodTag contains "setType-" %}
      {%- assign gluePanty = ""-%}
      {%- assign tempFab = prodTag | replace: "setType-", "" -%}
      {% if tempFab contains 'high_waisted' %}
        {%- assign gluePanty = "High Waisted"-%}  
      {% elsif tempFab contains 'high_cut' %}
        {%- assign gluePanty = "High Cut"-%}
      {% elsif tempFab contains '_brief' %}
        {%- assign gluePanty = "Brief"-%}  
      {% elsif tempFab contains '_thong' %}
        {%- assign gluePanty = "Thong"-%}  
      {% endif %}
    {% endif %}
  {% endfor %}
  {% assign isBundleSetFrabric =  glueFab | append: gluePanty %}
{% endif %}

{%- unless proImageSize -%}
	{%- assign proImageSize = '800x' -%}
{%- endunless -%}
{%- assign on_sale = false -%}
{%- if product.compare_at_price > product.price -%}
    {%- assign on_sale = true -%}
{%- endif -%}
{%- assign sold_out = true -%}
{%- if product.available -%}
    {%- assign sold_out = false -%}
{%- endif -%}
{%- if product.description contains '[SHORTDESCRIPTION]' -%}
    {%- assign shortDescription = product.description | split:'[SHORTDESCRIPTION]' | first -%}
{%- else -%}
    {%- assign shortDescription = product.description | strip_html | truncatewords: 20 -%}
{%- endif -%}
{%- assign showQuickAdd = false -%}
{% if product.type contains "Cotton" %}
    {%- assign showQuickAdd = true -%}
{% else %}
    {% if product.handle contains 'pack' or product.handle contains 'sets' %}
    {% else %}
        {%- assign showQuickAdd = true -%}
    {% endif %}
{% endif %}


{% if collection.handle contains "last-call-seamless-underwear" %}
  	{% for prodTag in product.tags %}
    {% if prodTag contains "lightningDeal-" %}
    	{% assign isOnDealSale = true %}	
		{% assign dealSalePrice = prodTag | replace: "lightningDeal-", "" %}
    {% endif %}
    {% endfor %}
{% else %}
    {% for prodTag in product.tags %}
    {% if prodTag contains "capsuleDeal-" %}
    	{% assign isOnDealSale = true %}	
		{% assign dealSalePrice = prodTag | replace: "capsuleDeal-", "" %}
    {% endif %}
    {% if prodTag contains "lightningDeal-" %}
    	{% assign isOnDealSale = true %}	
		{% assign dealSalePrice = prodTag | replace: "lightningDeal-", "" %}
    {% endif %}
    {% endfor %}
{% endif %}

{%- assign productUrl = product.url -%}
{%- unless productUrl contains '?' -%}
    {%- assign productUrl = productUrl -%}
{%- endunless -%}
{%- assign productUrl = productUrl -%}


{%- assign hasFlag = "false" -%}
    {% for prodTag in product.tags %}
        {% if prodTag contains "prodFlag-" %}
            {% assign hasFlag = "true" %}
            {% assign prodFlag = prodTag | replace: "prodFlag-", "" | replace: "_", " " | capitalize %}
        {% endif %}
    {% endfor %}
    {% if product.type contains "Underwear" %}
        {% for prodTag in product.tags %}
            {% if prodTag contains "pantyType-" %}
                {%- assign tempTitle = prodTag | replace: "pantyType-", "" | replace: "_", " " -%}
                {% if tempTitle contains 'high cut' %}
                  {% assign prodNameTitle = 'High Cut' %}
                {% elsif tempTitle contains 'highwaisted thong' %}
                  {% assign prodNameTitle = 'High Waisted Thong' %}
                {% elsif tempTitle contains 'highwaisted' %}
                  {% assign prodNameTitle = 'High Waisted' %}
                {% else %}
                  {% assign prodNameTitle = tempTitle %}
                {% endif %}
            {% endif %}
            {% if prodTag contains "pantyColor-" %}
                {%- assign prodColorTitle = prodTag | replace: "pantyColor-", "" | replace: "_", " " -%}
            {% endif %}
            {% if prodTag contains "pantyFabric-" %}
                {% if prodTag == "pantyFabric-signature" %}
                    {%- assign prodFabricTitle = "Seamless" -%}
                {% elsif prodTag == "pantyFabric-cotton" %}
                    {%- assign prodFabricTitle = "Seamless" -%}
                {% else %}
                    {% if product.type contains "Mesh" %}
                        {%- assign prodFabricTitle = "Seamless" -%}
                    {% else %}
                        {%- assign prodFabricTitle = "Seamless" -%}
                    {% endif %}
                {% endif %}
            {% endif %}
        {% endfor %}
    {% elsif product.type contains "Bralette" %}
        {%- assign prodNameTitle = "Seamless" -%}
        {% for prodTag in product.tags %}
            {% if prodTag == "braletteType-wireless_seamless" %}
                {%- assign prodFabricTitle = "Wireless Bralette" -%}
            {% elsif prodTag contains "braletteFabric-" %}
                {% if prodTag == "braletteFabric-signature" %}
                    {%- assign prodFabricTitle = "Support Bralette" -%}
                {% elsif prodTag == "braletteFabric-cotton" %}
                    {%- assign prodFabricTitle = "Support Cotton" -%}
                {% elsif product.type contains "Mesh" %}
                  {%- assign prodFabricTitle = "Sheer Bralette" -%}
                {% else %}
                   {%- assign prodFabricTitle = "Err Add p type" -%}
                {% endif %}
            {% endif %}
        {% endfor %}
    {% elsif product.type contains "Core Bra" %}
        {%- assign prodNameTitle = "Seamless" -%}
        {% for prodTag in product.tags %}
            {% if prodTag contains "braletteFabric-" %}
                {% if prodTag == "braletteFabric-signature" %}
                    {%- assign prodFabricTitle = "Only Bra" -%}
                {% elsif prodTag == "braletteFabric-cotton" %}
                    {%- assign prodFabricTitle = "Err add p type" -%}
                        {% else %}
                            {% if product.type contains "Mesh" %}
                        {%- assign prodFabricTitle = "Sheer Bralette" -%}
                    {% else %}
                        {%- assign prodFabricTitle = "Err Add p type" -%}
                    {% endif %}
                {% endif %}
            {% endif %}
        {% endfor %}
    {% elsif product.type == "Wrap Top" %}
        {%- assign prodNameTitle2 = "Wrap Top" -%}
        {% for prodTag in product.tags %}
            
            {% if prodTag contains "wrapFabric-" %}
                {% if prodTag == "wrapFabric-signature" %}
                    {%- assign prodFabricTitle = "Seamless" -%}
                {% else %}
                    {%- assign prodFabricTitle = prodTag | replace: "wrapFabric-", "" | replace: "_", " " -%}
                {% endif %}
            {% endif %}
        {% endfor %}
    {% elsif product.type == "Silk Blouse" %}
      {%- assign prodFabricTitle = "blouse" -%}
      {%- assign prodNameTitle = "washable eco silk" -%}
      
    {% elsif product.type == "Silk Tank" %}
      {%- assign prodFabricTitle = "tank" -%}
      {%- assign prodNameTitle = "washable eco silk" -%}
      
    {% elsif product.type == "Silk Shorts" %}
      {%- assign prodFabricTitle = "shorts" -%}
      {%- assign prodNameTitle = "washable eco silk" -%}
      {% for prodTag in product.tags %}
          {% if prodTag contains "shortsColor-" %}
              {%- assign prodColorTitle = prodTag | replace: "shortsColor-", "" | replace: "_", " " -%}
          {% endif %}
      {% endfor %}
    {% elsif product.type == "Silk Scarf" %}
      {%- assign prodFabricTitle = "scarf" -%}
      {%- assign prodNameTitle = "washable eco silk" -%}
      
    {% elsif product.type == "Silk Dress" %}
      {%- assign prodFabricTitle = "slip dress" -%}
      {%- assign prodNameTitle = "washable eco silk" -%}
     
    {% elsif product.type == "Silk Pants" %}
      {%- assign prodFabricTitle = "pants" -%}
      {%- assign prodNameTitle = "washable eco silk" -%}
    
    {% elsif product.type == "Long Silk Dress" %}
      {%- assign prodFabricTitle = "long slip dress" -%}
      {%- assign prodNameTitle = "washable eco silk" -%}
     
    {% elsif product.type == "Bodysuit" %}
        {%- assign prodFabricTitle = "Bodysuit" -%}
        {% for prodTag in product.tags %}
           
            {% if prodTag contains "bodysuitFabric-" %}
                {% if prodTag == "bodysuitFabric-signature" %}
                    {%- assign prodNameTitle = "Seamless" -%}
                {% else %}
                    {%- assign prodFabricTitle = prodTag | replace: "bodysuitFabric-", "" | replace: "_", " " -%}
                {% endif %}
            {% endif %}
        {% endfor %}
    {% elsif product.type contains "Bra Pack" %}
        {% for prodTag in product.tags %}
          {% if prodTag contains "bundleType-" %}
            {%- assign prodNameTitle = prodTag | replace: "bundleType-", "" | replace: "_", " " -%}
          {% endif %}
         
          {% if prodTag contains "bundleFabric-" %}
            {% if prodTag == "bundleFabric-signature" %}
              {%- assign prodFabricTitle = "Support" -%}
            {% elsif prodTag == "bundleFabric-mesh" %}
              {%- assign prodFabricTitle = "Sheer" -%}
            {% elsif prodTag == "bundleFabric-mesh_and_signature" %}
              {%- assign prodFabricTitle = "Sheer & Support" -%}
            {% else %}
              {%- assign prodFabricTitle = "Seamless" -%}
            {% endif %}
          {% endif %}
        {% endfor %}
    {% elsif product.type contains "Pack" %}
        {%- assign prodFabricTitle = 'Seamless' -%}
    {% elsif product.type == "Tank" %}
        {%- assign prodNameTitle = "Seamless" -%}
        {%- assign prodFabricTitle = "Tank" -%}    
    {% endif %}

    {% if prodNameTitle == "highwaisted_thong" %}
        {% assign prdImgFileName = "hwthong" %}
    {% else %}
        {% assign prdImgFileName = prodNameTitle %}
    {% endif %}

                    {% assign premImgFileName = prodColorTitle | replace: " ", "" | append: "---" | append: prdImgFileName | append: "---missy---tile_fr.jpg" %}

<div class="col velaProBlock quickadd carousel-item ept" data-size-guid="{% render 'collection-selectors-charts', product_target: product %}">
  <div class="col-wrap velaProBlockInner">
    {% if hasFlag == "true" and isOnHolidaySale == false %}
    <div class="prodTileFlag">
      <div class="prodTileFlagInnerWrapper">
        <span>{{ prodFlag }}</span>
      </div>
    </div>
    {% endif %}
    <div class="product-image proHImage d-flex flexJustifyCenter">
      <a class="proFeaturedImage" href="{{ product.url }}" draggable="false">
        {% for image in product.images %}
        {%- assign itemNumber = forloop.index -%}
        {%- if itemNumber == 1 -%}
        <img class="lazyload" width="175" height="219" draggable="false" alt="{{ image.alt }}" title="{{ image.alt }}" data-src="{{ image | img_url: '295x' }}">
        {%- endif -%}
        {% endfor %}
        <div class="col-pro-details">
          {% if product.type contains "Underwear" %}
          <h3 href="{{ product.url }}" draggable="false">
            <span class="cy-testClName " data-cyclname="{{prodNameTitle}}">{{ prodNameTitle | capitalize  }}</span>
            <span class="cy-testClFabric color" data-cyclfabric="{{prodFabricTitle}}">{{ prodFabricTitle| capitalize  }}</span>
          </h3>
          {% elsif product.type contains "Bra Pack" %}
          <h3 href="{{ product.url }}" draggable="false">
            <span class="cy-testClName" data-cyclname="{{prodNameTitle}}">{{ prodNameTitle | capitalize  }}</span>
            <span class="cy-testClFabric color" data-cyclfabric="{{prodFabricTitle}}">{{ prodFabricTitle| capitalize  }}</span>
          </h3>
          {% elsif product.type contains "Season Set" %}
          <h3 href="{{ product.url }}" draggable="false">
            <span class="cy-testClFabric" data-cyclfabric="{{prodFabricTitle}}">{{ prodFabricTitle| capitalize  }}</span>
            <span class="cy-testClName color" data-cyclname="{{isBundleSetFrabric}}">{{ isBundleSetFrabric | capitalize  }}</span>
          </h3>
          {% else %}
          <h3 href="{{ product.url }}" draggable="false">
            <span class="cy-testClFabric " data-cyclfabric="{{prodFabricTitle}}">{{ prodFabricTitle| capitalize  }}</span>
            <span class="cy-testClName color" data-cyclname="{{prodNameTitle}}">{{ prodNameTitle | capitalize  }}</span>
          </h3>
          {% endif %}
        </div>
      </a>
      
    </div>
    <div class="product-details proButton clearfix">
      {% if product.type == "Silk Scarf" %}
          {%- assign variantCount = product.variants | size -%}
          <form action="/cart/add" method="post" enctype="multipart/form-data" class="formAddToCart" style="display: block;">            				  
              <input type="hidden" name="id" value="{{ product.variants.first.id }}" />
              {%- if sold_out -%}
                  <button class="btn btnProduct btnAddToCart disabled" type="submit" value="Submit" disabled>
                      <span class="icons icon-handbag"></span>
                      <span class="text">{{ 'products.product.sold_out' | t }}</span>
                  </button>
              {%- else -%}
                  {%- if variantCount > 1 -%}
                      <a class="btn btnProduct btnAddToCart" href="{{ product.url }}" title="{{ 'products.product.select_options' | t }}">
                          <span class="icons icon-handbag"></span>
                          <span class="select_options text">{{ 'products.product.select_options' | t }}</span>
                      </a>
                  {%- else -%}
                      <div class="quick_btn">
                        <div class="productQuickAdd">
                          <button class="btn  btnProduct btnAddToCart" type="submit" value="Submit">
                            <div class="quickAddBtnInnerWrapper">
                              <span class="text">Add to Cart</span>
                              <div class="prodTilePriceWrapper{% if customer.tags contains 'Active Subscriber' and product.metafields.ebyacf.vip_product_price %} vipHighlight{%endif%}">
                                <p class="price bfx-price">{{ product.price | money_without_trailing_zeros  }}</p>
                                {% if isOnHolidaySale %}
                                {% if product.type contains "Cotton" %}
                                    {% assign perOff = currSaleDiscount | replace: "%", "" %}
                                {% else %}
                                    {% assign perOff = currSaleDiscount | replace: "%", "" %}
                                {% endif %}
                                  {% if customer.tags contains 'Active Subscriber' %}
                                      {% assign subscriberDiscount = product.metafields.ebyacf.vip_product_price | round  %}
                                      {% assign holidayMoneyOff = product.price | divided_by: 100 | round: 2 | times: perOff | round %}
                                      {% assign moneyOff = holidayMoneyOff | plus: subscriberDiscount | money_without_currency %}
                                  {% else %}
                                      {% assign moneyOff = product.price | divided_by: 100 | round: 2 | times: perOff | round | money_without_currency %}
                                  {% endif %}
                              	<div class="priceProduct holidayPriceWrapper ebyProdTile-vipPriceWrapper strikethrough bfx-price">{{ product.price | money_without_trailing_zeros}}</div>
                              	<div class="holidayPriceWrapper standard saleHighlight bfx-price">{{ product.price | divided_by: 100 | round: 2 | minus: moneyOff | round: 2 | times: 100 | round | money_without_trailing_zeros }}</div>
                                {% endif %}
                                {% if isOnDealSale and isOnHolidaySale == false %}
                                    <div class="priceProduct holidayPriceWrapper ebyProdTile-vipPriceWrapper strikethrough bfx-price">{{ product.price | money_without_trailing_zeros}}</div>
                                    <div class="holidayPriceWrapper standard saleHighlight bfx-price">{{ dealSalePrice | money_without_trailing_zeros }}</div>
                                {% endif %}
                    
                                {% if customer.tags contains 'Active Subscriber' %}
                                {% if product.type == "Mask"%}
                                {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                                <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                                {% else %}
                                <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                                {% endif %}
                                <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                                  {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                                  {%- assign discount = product.price | times: 44 | divided_by: 100 -%}
                                  {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                                  {% comment %}
                                  <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                                  {% endcomment %}
                                  <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$6</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                                  {% else %}
                                  <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                                  {% endif %}
                                </div>
                                {% elsif product.type == "Core Bralette" or product.type == "Core Bra" or product.type == "Cotton Bralette" or product.type == "Mesh Bralette" %}
                                  {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                                  <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                                  {% else %}
                                  <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                                  {% endif %}
                                  <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                                    {%- assign discount = product.price | times: 42.27 | divided_by: 100 -%}
                                    {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                                    {% comment %}
                                    <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                                    {% endcomment %}
                                    <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$20</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                                    {% else %}
                                    <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                                    {% endif %}
                                  </div>
                                {% elsif product.type == "Wrap Top" or product.type contains "Silk" %}
                                  {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                                  <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                                  {% else %}
                                  <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                                  {% endif %}
                                  <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                                    {%- assign discount = product.price | times: 42.27 | divided_by: 100 -%}
                                    {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                                    {% comment %}
                                    <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                                    {% endcomment %}
                                    <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$20</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                                    {% else %}
                                    <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                                    {% endif %}
                                  </div>
                                {% elsif product.type == "Core Underwear" and product.tags contains "Featured Style" or product.type == "Mesh Underwear" %}
                                {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                                <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                                {% else %}
                                <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                                {% endif %}
                                <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                                  {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                                  {%- assign discount = product.price | times: 44 | divided_by: 100 -%}
                                  {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                                  {% comment %}
                                  <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                                  {% endcomment %}
                                  <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$9</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                                  {% else %}
                                  <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                                  {% endif %}
                                </div>
                                {% elsif product.type == "Core Underwear" or product.type == "Cotton Underwear" or product.type == "Tank"  or product.type == "Bodysuit" or product.type == "Mesh Underwear" %}
                                {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                                <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', '' }}</div>
                                {% else %}
                                <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                                {% endif %}
                                <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                                  {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                                  {%- assign discount = product.price | times: 43.24 | divided_by: 100 -%}
                                  {%- assign holidayPrice = product.price | minus: discount | money_without_trailing_zeros  -%}
                                  {% comment %}
                                  <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                                  {% endcomment %}
                                  <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$7.50</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                                  {% else %}
                                  <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )" }}</p>
                                  {% endif %}
                                </div>
                                {% elsif product.type contains "Premium" %}

                                <div class="priceProduct {% if on_sale %}priceSale bfx-sale-price{% endif %}{% if product.metafields.ebyacf.evergreen_price_test %} st-tangentPrice{%endif%} bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>

                                {% elsif product.type contains "Surprise Panty Pack" %}

                                <div class="priceProduct {% if on_sale %}priceSale bfx-sale-price{% endif %}{% if product.metafields.ebyacf.evergreen_price_test %} st-tangentPrice{%endif%} bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>

                                {% endif %}

                                {% else %}
                                <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                                  {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                                  {%- assign discount = product.price | times: shop.metafields.ebyacf.sitewide_discount_price | divided_by: 100 -%}
                                  {%- assign holidayPrice = product.price | minus: discount | money_without_trailing_zeros  -%}
                                  <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                                  {% else %}
                                  <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )" }}</p>
                                  {% endif %}
                                </div>
                                {% endif %}                                
                              </div>
                            </div>
                          </button>
                        </div>
                        <article class="qab-footer">
                            <span class="colReviewAggrWrapper" draggable="false">
                              <span class="stamped-product-reviews-badge stamped-main-badge" data-id="{{ product.id }}" data-product-sku="{{ product.selected_or_first_available_variant.sku }}" data-product-title="{{ product.title | escape }}" data-product-type="{{ product.type }}" style="display: block;"></span>
                            </span>
                            <span class="quickAddPriceNote{% if customer.tags contains 'Active Subscriber' and product.metafields.ebyacf.vip_product_price != "" %} vipHighlight{%endif%}">subscriber price</span>
                        </article>
                      </div>
                  {%- endif -%}
              {%- endif -%}
          </form>
      {% elsif product.type == "Season Set" %}
          <div class="normal_btn_wrapper">
            <a href="{{ product.url }}" title="Select Size" >
              <button class="btn normal" title="Select Size" style="margin: 0;">
                <div class="quickAddBtnInnerWrapper">
                  <span class="text">Select Size</span>
                  <div class="prodTilePriceWrapper">
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      <p class="bfx-price" style="margin: 0;margin-right:0.4rem; text-decoration: line-through;font-size: 12px;">{{ product.compare_at_price | money_without_trailing_zeros  }}</p>
                    </div>
                    {% if isOnHolidaySale %}
                      {% assign perOff = currSaleDiscount | replace: "%", "" %}
                      {% assign moneyOff = product.price | divided_by: 100 | round: 2 | times: perOff | round | money_without_currency %}
                      <p class="bfx-price" style="margin: 0;margin-right:0.4rem; text-decoration: line-through;font-size: 12px; color:#7f85a3">{{ product.compare_at_price | money_without_trailing_zeros  }}</p>
                      <p class="price bfx-price" id="cy-setsalepricecll" style="margin: 0;margin: 0;line-height: normal;color:#d0021b !important; text-decoration: none;">{{ product.price | divided_by: 100 | round: 2 | minus: moneyOff | round: 2 | times: 100 | round | money_without_trailing_zeros }}</p> 
                    {% else %}
                      <p class="price bfx-price" style="margin: 0;margin: 0;line-height: normal;color:#d0021b !important;">{{ product.price | money_without_trailing_zeros  }}</p>                    
                    {% endif %}
                  </div>
                </div>
              </button>
            </a>
          </div>
      {% else %}
          {%- assign variantCount = product.variants | size -%}
          <form action="/cart/add" method="post" enctype="multipart/form-data" class="formAddToCart filterModeAddToCart quick_btn">
            <input class="filterItemOptVal" type="hidden" name="id" value="{{ product.variants.first.id }}" />
            <input class="filterItemOptValDefault" type="hidden" name="properties[Shipping Option]" value="pickup Ecommerce WH" />
            <button class="btn btnProduct quickAddBySizeBtn" type="submit" value="Submit">
              <div class="quickAddBtnInnerWrapper">
                  <span class="text">Add To Cart</span>
                  <div class="prodTilePriceWrapper{% if customer.tags contains 'Active Subscriber' and product.metafields.ebyacf.vip_product_price %} vipHighlight{%endif%}{% if isOnDealSale%} hoPriceSale{% endif %}">
                    <p class="price bfx-price">{{ product.price | money_without_trailing_zeros  }}</p>
                    {% if isOnHolidaySale %}
                        {% if product.type contains "Cotton" %}
                            {% assign perOff = currSaleDiscount | replace: "%", "" %}
                        {% else %}
                            {% assign perOff = currSaleDiscount | replace: "%", "" %}
                        {% endif %}
                        {% if customer.tags contains 'Active Subscriber' %}
                            {% assign subscriberDiscount = product.metafields.ebyacf.vip_product_price | round  %}
                            {% assign holidayMoneyOff = product.price | divided_by: 100 | round: 2 | times: perOff | round %}
                            {% assign moneyOff = holidayMoneyOff | plus: subscriberDiscount | money_without_currency %}
                        {% else %}
                            {% assign moneyOff = product.price | divided_by: 100 | round: 2 | times: perOff | round | money_without_currency %}
                        {% endif %}
                        <div class="priceProduct holidayPriceWrapper ebyProdTile-vipPriceWrapper strikethrough bfx-price">{{ product.price | money_without_trailing_zeros}}</div>
                        <div class="holidayPriceWrapper standard saleHighlight bfx-price">{{ product.price | divided_by: 100 | round: 2 | minus: moneyOff | round: 2 | times: 100 | round | money_without_trailing_zeros }}</div>
                    {% endif %}
                    {% if isOnDealSale and isOnHolidaySale == false %}
                        <div class="priceProduct holidayPriceWrapper ebyProdTile-vipPriceWrapper strikethrough bfx-price">{{ product.price | money_without_trailing_zeros}}</div>
                        <div class="holidayPriceWrapper standard saleHighlight bfx-price">{{ dealSalePrice | money_without_trailing_zeros }}</div>
                    {% endif %}
                    
                    {% if customer.tags contains 'Active Subscriber' %}
                    {% if product.type == "Mask"%}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                      {%- assign discount = product.price | times: 44 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$6</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Core Bralette" or product.type == "Core Bra" or product.type == "Cotton Bralette" or product.type == "Mesh Bralette" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 42.27 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$20</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Wrap Top" or product.type contains "Silk" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 42.27 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$20</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Core Underwear" and product.tags contains "Featured Style" or product.type == "Mesh Underwear" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 44 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$9</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Core Underwear" or product.type == "Cotton Underwear" or product.type == "Tank" or product.type == "Bodysuit" or product.type == "Mesh Underwear" or product.type == "Premium Underwear" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', '' }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 43.24 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_trailing_zeros  -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$7.50</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )" }}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type contains "Surprise Panty Pack" or product.type contains "Panty Pack" %}
    
                    <div class="priceProduct {% if on_sale %}priceSale bfx-sale-price{% endif %}{% if product.metafields.ebyacf.evergreen_price_test %} st-tangentPrice{%endif%} bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
    
                    {% endif %}
    
                    {% else %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                      {%- assign discount = product.price | times: shop.metafields.ebyacf.sitewide_discount_price | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_trailing_zeros  -%}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )" }}</p>
                      {% endif %}
                    </div>
                    {% endif %}                                
                  </div>
                </div>
            </button>
          </form>
          <div class="quick_btn noFiltermodeAddToCart">
            <div class="productQuickAdd">
              <button class="btn btnProduct btnProductQuickAdd" data-href="#velaQuickAdd-{{ product.id }}" data-handle="{{ product.handle }}" title="Quick Add +">
                  <div class="quickAddBtnInnerWrapper" {% if isBundlePack %}id="eby-bundle-bras23-{{ product.id }}" data-typepdp="{{ product.type }}" data-packprice="{{packPrice}}" data-mainids="{{packProducts}}" data-bundlepdp="{{bndlVariants}}" data-bundlepdp2="{{bndlVariants2}}" {% endif %}>
                  <span class="text">Add To Cart</span>
                  <div class="prodTilePriceWrapper{% if customer.tags contains 'Active Subscriber' and product.metafields.ebyacf.vip_product_price %} vipHighlight{%endif%}{% if isOnDealSale%} hoPriceSale{% endif %}{% if product.type == "Bra Pack" or product.type == "Season Set" %} bundle-price23{% endif %}">
                    <p class="price bfx-price">{{ product.price | money_without_trailing_zeros  }}</p>
                    {% if isOnHolidaySale %}
                        {% if product.type contains "Cotton" %}
                            {% assign perOff = currSaleDiscount | replace: "%", "" %}
                        {% else %}
                            {% assign perOff = currSaleDiscount | replace: "%", "" %}
                        {% endif %}
                        {% if customer.tags contains 'Active Subscriber' %}
                            {% assign subscriberPrice = product.metafields.ebyacf.vip_product_price  | replace: '( $', '' | replace: ' )', '' | replace: ' members', '' %}                          
                            {% assign subscriberDiscount = product.price | money_without_currency | minus: subscriberPrice  %}
                            {% assign holidayMoneyOff = subscriberPrice | times: perOff | round %}
                            {% assign moneyOff = holidayMoneyOff | money_without_currency | plus: subscriberDiscount %}
                        {% else %}
                            {% assign moneyOff = product.price | divided_by: 100 | round: 2 | times: perOff | round | money_without_currency %}
                        {% endif %}
                        <div class="holidayPriceWrapper xx standard saleHighlight bfx-price">{{ product.price | divided_by: 100 | round: 2 | minus: moneyOff | round: 2 | times: 100 | round | money_without_trailing_zeros }}</div>
                    {% endif %}
                    {% if isOnDealSale and isOnHolidaySale == false %}
                        <div class="holidayPriceWrapper standard saleHighlight bfx-price">{{ dealSalePrice | money_without_trailing_zeros }}</div>
                    {% endif %}
                    {% if product.type == "Bra Pack" or product.type == "Season Set" %}
                        <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                          <p class="bfx-price">{{ isBundleBraExtra }}</p>
                        </div>
                    {% endif %}
                    {% if customer.tags contains 'Active Subscriber' %}
                    {% if product.type == "Mask"%}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                      {%- assign discount = product.price | times: 44 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$6</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Core Bralette" or product.type == "Core Bra" or product.type == "Cotton Bralette" or product.type == "Mesh Bralette" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 42.27 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$20</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Wrap Top" or product.type contains "Silk" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 42.27 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$20</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Core Underwear" and product.tags contains "Featured Style" or product.type == "Mesh Underwear" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', ''  }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 44 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_currency -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$9</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )"}}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type == "Core Underwear" or product.type == "Cotton Underwear" or product.type == "Tank" or product.type == "Bodysuit" or product.type == "Mesh Underwear" or product.type == "Premium Underwear" %}
                    {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.metafields.ebyacf.vip_product_price | replace: '/ ', '' | replace: ' members', '' }}</div>
                    {% else %}
                    <div class="priceProduct {% if customer.tags contains 'Active Subscriber' %}vipHighlight {%endif%}{% if on_sale %}priceSale bfx-sale-price{% endif %}bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
                    {% endif %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %} 
                      {%- assign discount = product.price | times: 43.24 | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_trailing_zeros  -%}
                      {% comment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }}% Off</span></p>
                      {% endcomment %}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">$7.50</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )" }}</p>
                      {% endif %}
                    </div>
                    {% elsif product.type contains "Surprise Panty Pack" %}
    
                    <div class="priceProduct {% if on_sale %}priceSale bfx-sale-price{% endif %}{% if product.metafields.ebyacf.evergreen_price_test %} st-tangentPrice{%endif%} bfx-price">{{ product.price | money_without_trailing_zeros  }}</div>
    
                    {% endif %}
    
                    {% else %}
                    <div class="ebyProdTile-vipPriceWrapper bfx-remove-element">
                      {% if shop.metafields.ebyacf.enable_holiday_mode-vip_pg or shop.metafields.ebyacf.enable_holiday_mode-coll_pg %}
                      {%- assign discount = product.price | times: shop.metafields.ebyacf.sitewide_discount_price | divided_by: 100 -%}
                      {%- assign holidayPrice = product.price | minus: discount | money_without_trailing_zeros  -%}
                      <p>/ <span class="ebyHolidayPrice bfx-sale-price bfx-price">${{holidayPrice}}</span> <span class="ebyHolidayDiscount bfx-price">{{ shop.metafields.ebyacf.sitewide_discount_price }} Off</span></p>
                      {% else %}
                      <p class="bfx-price">{{product.metafields.ebyacf.vip_product_price | replace: "( " | replace: " members )" }}</p>
                      {% endif %}
                    </div>
                    {% endif %}                                
                  </div>
                </div>
              </button>
              <div class="selection-wrapper" id="velaQuickAdd-{{ product.id }}">
              </div>
            </div>
            <article class="qab-footer">
                <span class="colReviewAggrWrapper" draggable="false">
                  <span class="stamped-product-reviews-badge stamped-main-badge" data-id="{{ product.id }}" data-product-sku="{{ product.selected_or_first_available_variant.sku }}" data-product-title="{{ product.title | escape }}" data-product-type="{{ product.type }}" style="display: block;"></span>
                </span>
                {% unless isOnHolidaySale or isOnDealSale %}
                {% if product.metafields.ebyacf.vip_product_price %}
                <span class="quickAddPriceNote{% if customer.tags contains 'Active Subscriber' and product.metafields.ebyacf.vip_product_price != "" %} vipHighlight{%endif%}">subscriber price</span>
              	{% endif %}
                {% endunless %}
                {% if isOnHolidaySale or isOnDealSale %}
                <span class="quickAddPriceNote vipHighlight">sale price</span>
              	{% endif %}
            </article>
          </div>
      {% endif %}
    </div>
  </div>
</div>